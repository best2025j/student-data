import{r as o,j as e,u as w,a as E,b as L,c as P,R as k,d as T}from"./vendor-react-DjW6E1in.js";import{f as v,h as b,k as _}from"./vendor-SxIEEfaT.js";(function(){const x=document.createElement("link").relList;if(x&&x.supports&&x.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))h(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const t of l.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&h(t)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function h(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();const O=({applyFilters:d})=>{const x=[{id:"age",label:"Age",type:"text"},{id:"state",label:"State",type:"text"},{id:"level",label:"Level",type:"text"},{id:"gender",label:"Gender",type:"select",options:[{label:"Male",value:"male"},{label:"Female",value:"female"}]}],[n,h]=o.useState({age:"",state:"",level:"",gender:""}),s=t=>{const{name:r,value:p}=t.target;h(i=>({...i,[r]:p}))},l=t=>{t.preventDefault(),console.log("Filters Applied:",n),d(n)};return e.jsxs("form",{onSubmit:l,className:"gap-4 grid grid-cols-3 items-center py-8 w-full",children:[x.map(t=>e.jsxs("fieldset",{className:"border border-gray-400 px-4 py-2 rounded-md",children:[e.jsx("legend",{className:"text-sm font-semibold text-gray-700 px-2",children:t.label}),t.type==="select"?e.jsxs("select",{id:t.id,name:t.id,value:n[t.id]||"",onChange:s,required:!0,className:"w-full p-1 rounded outline-none",children:[e.jsxs("option",{value:"",children:["Select ",t.label]}),t.options.map((r,p)=>e.jsx("option",{value:r.value,children:r.label},p))]}):e.jsx("input",{type:t.type,id:t.id,name:t.id,value:n[t.id]||"",onChange:s,required:!0,className:"w-full p-1 rounded outline-none"})]},t.id)),e.jsx("div",{className:"pt-3",children:e.jsx("input",{type:"submit",value:"Search",className:"rounded py-4 bg-green-500 text-white w-full hover:bg-green-600 transition"})})]})},M=({students:d,loading:x,error:n})=>{const h=w(),s=t=>{h(`/result/${t.id}`,{state:{student:t}})},l=async t=>{try{const r=await v.post("https://test.omniswift.com.ng/api/viewResult/2",{student_id:t});if(!r.data||!r.data.data){console.error("Invalid response data",r);return}h(`/result/${t}`,{state:{studentData:r.data.data}})}catch(r){console.error("Error fetching student result:",r)}};return e.jsx("div",{className:"w-full px-8 py-3 bg-white",children:x?e.jsxs("p",{className:"text-center flex flex-col justify-center items-center h-[450px] w-full text-blue-500",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Loading..."]}):n?e.jsxs("p",{className:"text-center text-red-500",children:["Error: ",n]}):d.length>0?e.jsx("div",{className:"overflow-y-auto w-full h-[450px]",children:e.jsxs("table",{className:"table-fixed w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200 text-black text-left text-sm font-bold h-14",children:[e.jsx("th",{className:"text-center",children:"S/N"}),e.jsx("th",{children:"Surname"}),e.jsx("th",{children:"First Name"}),e.jsx("th",{children:"Age"}),e.jsx("th",{children:"Gender"}),e.jsx("th",{children:"Level"}),e.jsx("th",{children:"State"}),e.jsx("th",{className:"text-center",children:"Action"})]})}),e.jsx("tbody",{children:d.map((t,r)=>e.jsxs("tr",{onClick:()=>s(t),className:"border-b text-sm border-gray-300 h-14 text-left text-black-10 capitalize cursor-pointer",children:[e.jsx("td",{className:"text-center",children:r+1}),e.jsx("td",{children:t.surname||"N/A"}),e.jsx("td",{children:t.firstname||"N/A"}),e.jsx("td",{children:t.age||"N/A"}),e.jsx("td",{children:t.gender||"N/A"}),e.jsx("td",{children:t.level||"N/A"}),e.jsx("td",{children:t.state||"N/A"}),e.jsx("td",{className:"text-center",children:e.jsx("button",{onClick:()=>l(t.id),className:"bg-green-500 hover:bg-green-600 cursor-pointer transition-all font-normal w-[126px] h-[35px] text-xs text-white rounded",children:"Download File"})})]},r))})]})}):e.jsx("p",{className:"text-center py-4 text-gray-500",children:"No data available"})})},G=()=>{const[d,x]=o.useState([]),[n,h]=o.useState([]),[s,l]=o.useState(!0),[t,r]=o.useState(null);o.useEffect(()=>{(async()=>{try{const m=await(await fetch("https://test.omniswift.com.ng/api/viewAllData")).json();console.log("API Response:",m),x(m.data.students||[]),h(m.data.students||[])}catch(f){console.error("Error fetching data:",f),r("Failed to load data.")}finally{l(!1)}})()},[]);const p=i=>{let f=d.filter(m=>(i.age===""||m.age.toString()===i.age)&&(i.state===""||m.state.toLowerCase().includes(i.state.toLowerCase()))&&(i.level===""||m.level.toLowerCase().includes(i.level.toLowerCase()))&&(i.gender===""||m.gender.toLowerCase()===i.gender.toLowerCase()));h(f)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-[90%] h-full flex-col flex justify-center mx-auto items-start relative top-[30px]",children:e.jsxs("div",{className:"space-y-4 w-full",children:[e.jsx("h1",{className:" text-4xl text-black-10 font-black",children:"Student Data Table"}),e.jsxs("div",{className:"w-full h-[336px] p-8 bg-white ",children:[e.jsx("h1",{className:"text-gray-10",children:"Filter Student Table By:"}),e.jsx(O,{applyFilters:p})]}),e.jsx(M,{students:n,loading:s,error:t})]})})})},z=()=>{const{id:d}=E();w();const x=L(),[n,h]=o.useState(null),[s,l]=o.useState(!0),[t,r]=o.useState(null),p=o.useRef(null),i=sessionStorage.getItem(`downloaded_${d}`);o.useEffect(()=>{(async()=>{try{const u=await v.post("https://test.omniswift.com.ng/api/viewResult/2",{student_id:d});if(u.data&&u.data.data)h(u.data.data);else throw new Error("Invalid response data")}catch(u){console.error("Error fetching student result:",u),r("Failed to fetch student result. Please try again.")}finally{l(!1)}})()},[d]),o.useEffect(()=>{var c;n&&((c=x.state)!=null&&c.autoDownload)&&!i&&(sessionStorage.setItem(`downloaded_${d}`,"true"),requestAnimationFrame(()=>{setTimeout(()=>{f()},1e3)}))},[n,x.state]);const f=async()=>{if(!p.current){console.error("Error: resultRef is null");return}try{const c=await b(p.current,{scale:4,backgroundColor:"#ffffff",useCORS:!0}),u=c.toDataURL("image/png"),N=new _("p","mm","a4"),g=210,R=c.height*g/c.width;N.addImage(u,"PNG",0,10,g,R),N.save(`Student_Result_${n.surname}.pdf`)}catch(c){console.error("Error generating PDF:",c)}b(document.body).then(function(c){document.body.appendChild(c)})};if(s)return e.jsxs("p",{className:"flex flex-col justify-center items-center h-screen w-full text-blue-500",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Loading student result..."]});if(t)return e.jsxs("p",{className:"flex flex-col justify-center items-center h-screen w-full text-blue-500",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),t]});if(!n)return e.jsxs("p",{className:"flex flex-col justify-center items-center h-screen w-full text-blue-500",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"No data available"]});const{surname:m,firstname:y,level:S,gender:A,state:F,reg_no:C,session:D,result:j,cummulative:a}=n;return e.jsxs("div",{ref:p,className:"space-y-4 w-full h-full px-4",children:[e.jsxs("div",{className:"flex justify-between items-center w-full h-full",children:[e.jsx("div",{children:e.jsx("img",{src:"/Logo.png",alt:"School Logo",className:"w-32 mx-auto mb-4"})}),e.jsxs("div",{className:"flex flex-col items-center text-center py-4  gap-4",children:[e.jsxs("div",{className:"w-full max-w-[275px] justify-center flex flex-col items-center",children:[e.jsx("h1",{className:"text-base font-bold",children:"FREMONT COLLEGE OF EDUCATION"}),e.jsx("p",{className:"text-xs max-w-[240px] text-center",children:"No.5 Raymond Osuman Street, PMB 2191 Maitama, Abuja, Nigeria."})]}),e.jsxs("div",{className:"text-xl font-semibold",children:[e.jsx("h1",{children:"Post Graduate Diploma in Education"}),e.jsx("p",{className:"text-xs font-bold",children:"Student First Semester Statement Of Result"})]})]}),e.jsx("div",{children:e.jsx("img",{src:"/Passport.png",alt:"Student Profile",className:"w-[100px] h-[100px] mx-auto border border-gray-300 shadow-sm"})})]}),e.jsxs("div",{className:"flex justify-between w-full py-6",children:[e.jsxs("div",{className:"flex-col flex text-xs gap-4",children:[e.jsxs("div",{className:"w-[200px] flex gap-4",children:[e.jsx("span",{className:"text-xs font-bold",children:"Name:"}),e.jsxs("h1",{className:"capitalize",children:[m," ",y]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{className:"text-xs font-bold",children:"Level:"}),e.jsxs("h1",{className:"",children:[" ",S||"N/A"]})]})]}),e.jsxs("div",{className:"flex-col flex text-xs gap-4",children:[e.jsxs("div",{className:"w-[200px] flex gap-4",children:[e.jsx("span",{className:"text-xs font-bold",children:"gender:"}),e.jsx("h1",{className:"capitalize",children:A||"N/A"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{className:"text-xs font-bold",children:"state:"}),e.jsxs("h1",{className:"",children:[" ",F||"N/A"]})]})]}),e.jsxs("div",{className:"flex-col flex text-xs gap-4",children:[e.jsxs("div",{className:"w-[200px] flex gap-2",children:[e.jsx("span",{className:"text-xs font-bold",children:"Reg. No.:"}),e.jsx("h1",{className:"",children:C||"N/A"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{className:"text-xs font-bold",children:"Session:"}),e.jsxs("h1",{className:"",children:[" ",D||"N/A"]})]})]})]}),e.jsx("div",{className:"w-full bg-white",children:e.jsx("div",{className:"overflow-y-auto w-full",children:e.jsxs("table",{className:"table-fixed w-full border-collapse bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#0D7590] text-white text-left text-sm font-bold h-14",children:[e.jsx("th",{className:"text-center",children:"S/N"}),e.jsx("th",{className:"",children:"Course Code"}),e.jsx("th",{className:"",children:"Course Title"}),e.jsx("th",{className:"text-center",children:"Unit"}),e.jsx("th",{className:"text-center",children:"Grade"}),e.jsx("th",{className:"text-center",children:"Total Point"})]})}),e.jsx("tbody",{children:j==null?void 0:j.map((c,u)=>e.jsxs("tr",{className:"text-sm bg-[#F2F2F2] even:bg-white h-14 text-left text-black",children:[e.jsx("td",{className:"text-center",children:u+1}),e.jsx("td",{children:c.coursecode}),e.jsx("td",{children:c.title}),e.jsx("td",{className:"text-center",children:c.credit_unit}),e.jsx("td",{className:"text-center",children:c.grade}),e.jsx("td",{className:"text-center",children:c.total_point})]},u))})]})})}),e.jsx("div",{className:"w-[438px] bg-white mt-6",children:e.jsxs("table",{className:"table-fixed w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#0D7590] text-white text-sm font-bold h-14",children:[e.jsx("th",{children:"UNTS"}),e.jsx("th",{children:"UNTD"}),e.jsx("th",{children:"GPTS"}),e.jsx("th",{children:"GPTD"}),e.jsx("th",{children:"GPATS"}),e.jsx("th",{children:"GPATD"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"text-sm bg-[#F2F2F2] h-14 text-center text-black",children:[e.jsx("td",{children:(a==null?void 0:a.unts)||"N/A"}),e.jsx("td",{children:(a==null?void 0:a.untd)||"N/A"}),e.jsx("td",{children:(a==null?void 0:a.gpts)||"N/A"}),e.jsx("td",{children:(a==null?void 0:a.gptd)||"N/A"}),e.jsx("td",{children:(a==null?void 0:a.gpats)||"N/A"}),e.jsx("td",{children:(a==null?void 0:a.gpatd)||"N/A"})]})})]})}),e.jsxs("div",{className:"py-4 text-sm font-medium",children:["Remarks: ",e.jsx("span",{className:"text-green-600",children:a==null?void 0:a.remarks})]}),e.jsxs("div",{className:"bottom-10 space-y-4 absolute",children:[e.jsx("input",{type:"text",className:"outline-none border-b"}),e.jsx("h1",{className:"text-black-10 text-sm",children:"Registrar"})]})]})},B=P([{path:"/",element:e.jsx("div",{className:"!bg-[#F6F6F6] min-h-screen",children:e.jsx(G,{})})},{path:"/result/:id",element:e.jsx(z,{})}],{future:{v7_relativeSplatPath:!0,v7_fetcherPersist:!0,v7_normalizeFormMethod:!0,v7_partialHydration:!0,v7_skipActionErrorRevalidation:!0}}),I=()=>e.jsx("div",{className:"app",children:e.jsx(k,{future:{v7_startTransition:!0},router:B})});T.createRoot(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(I,{})}));
