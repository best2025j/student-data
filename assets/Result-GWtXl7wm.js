import{d as P,u as E,e as C,r as l,j as e}from"./react-vendor-CSMy5Is9.js";import{h as m,f as F,e as k}from"./vendor-DfK2mEZf.js";const T="/student-data/assets/Logo-Bl0PQm68.png",L="/student-data/assets/Passport-DBeMcp5B.png",B=()=>{const{id:r}=P();E();const i=C(),[n,f]=l.useState(null),[j,N]=l.useState(!0),[x,p]=l.useState(null),c=l.useRef(null),u=sessionStorage.getItem(`downloaded_${r}`);l.useEffect(()=>{(async()=>{try{const a=await k.post("https://test.omniswift.com.ng/api/viewResult/2",{student_id:r});if(a.data&&a.data.data)f(a.data.data);else throw new Error("Invalid response data")}catch(a){console.error("Error fetching student result:",a),p("Failed to fetch student result. Please try again.")}finally{N(!1)}})()},[r]),l.useEffect(()=>{var t;n&&((t=i.state)!=null&&t.autoDownload)&&!u&&(sessionStorage.setItem(`downloaded_${r}`,"true"),requestAnimationFrame(()=>{setTimeout(()=>{g()},1e3)}))},[n,i.state]);const g=async()=>{if(!c.current){console.error("Error: resultRef is null");return}try{const t=await m(c.current,{scale:4,backgroundColor:"#ffffff",useCORS:!0}),a=t.toDataURL("image/png"),o=new F("p","mm","a4"),h=210,A=t.height*h/t.width;o.addImage(a,"PNG",0,10,h,A),o.save(`Student_Result_${n.surname}.pdf`)}catch(t){console.error("Error generating PDF:",t)}m(document.body).then(function(t){document.body.appendChild(t)})};if(j)return e.jsxs("p",{className:"flex flex-col justify-center items-center h-screen w-full text-blue-500",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Loading student result..."]});if(x)return e.jsxs("p",{className:"flex flex-col justify-center items-center h-screen w-full text-blue-500",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),x]});if(!n)return e.jsxs("p",{className:"flex flex-col justify-center items-center h-screen w-full text-blue-500",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"No data available"]});const{surname:w,firstname:b,level:y,gender:v,state:S,reg_no:D,session:R,result:d,cummulative:s}=n;return e.jsxs("div",{ref:c,className:"space-y-4 w-full h-full px-4",children:[e.jsxs("div",{className:"flex justify-between items-center w-full h-full",children:[e.jsx("div",{children:e.jsx("img",{src:T,alt:"School Logo",className:"w-32 mx-auto mb-4"})}),e.jsxs("div",{className:"flex flex-col items-center text-center py-4  gap-4",children:[e.jsxs("div",{className:"w-full max-w-[275px] justify-center flex flex-col items-center",children:[e.jsx("h1",{className:"text-base font-bold",children:"FREMONT COLLEGE OF EDUCATION"}),e.jsx("p",{className:"text-xs max-w-[240px] text-center",children:"No.5 Raymond Osuman Street, PMB 2191 Maitama, Abuja, Nigeria."})]}),e.jsxs("div",{className:"text-xl font-semibold",children:[e.jsx("h1",{children:"Post Graduate Diploma in Education"}),e.jsx("p",{className:"text-xs font-bold",children:"Student First Semester Statement Of Result"})]})]}),e.jsx("div",{children:e.jsx("img",{src:L,alt:"Student Profile",className:"w-[100px] h-[100px] mx-auto border border-gray-300 shadow-sm"})})]}),e.jsxs("div",{className:"flex justify-between w-full py-6",children:[e.jsxs("div",{className:"flex-col flex text-xs gap-4",children:[e.jsxs("div",{className:"w-[200px] flex gap-4",children:[e.jsx("span",{className:"text-xs font-bold",children:"Name:"}),e.jsxs("h1",{className:"capitalize",children:[w," ",b]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{className:"text-xs font-bold",children:"Level:"}),e.jsxs("h1",{className:"",children:[" ",y||"N/A"]})]})]}),e.jsxs("div",{className:"flex-col flex text-xs gap-4",children:[e.jsxs("div",{className:"w-[200px] flex gap-4",children:[e.jsx("span",{className:"text-xs font-bold",children:"gender:"}),e.jsx("h1",{className:"capitalize",children:v||"N/A"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{className:"text-xs font-bold",children:"state:"}),e.jsxs("h1",{className:"",children:[" ",S||"N/A"]})]})]}),e.jsxs("div",{className:"flex-col flex text-xs gap-4",children:[e.jsxs("div",{className:"w-[200px] flex gap-2",children:[e.jsx("span",{className:"text-xs font-bold",children:"Reg. No.:"}),e.jsx("h1",{className:"",children:D||"N/A"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{className:"text-xs font-bold",children:"Session:"}),e.jsxs("h1",{className:"",children:[" ",R||"N/A"]})]})]})]}),e.jsx("div",{className:"w-full bg-white",children:e.jsx("div",{className:"overflow-y-auto w-full",children:e.jsxs("table",{className:"table-fixed w-full border-collapse bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#0D7590] text-white text-left text-sm font-bold h-14",children:[e.jsx("th",{className:"text-center",children:"S/N"}),e.jsx("th",{className:"",children:"Course Code"}),e.jsx("th",{className:"",children:"Course Title"}),e.jsx("th",{className:"text-center",children:"Unit"}),e.jsx("th",{className:"text-center",children:"Grade"}),e.jsx("th",{className:"text-center",children:"Total Point"})]})}),e.jsx("tbody",{children:d==null?void 0:d.map((t,a)=>e.jsxs("tr",{className:"text-sm bg-[#F2F2F2] even:bg-white h-14 text-left text-black",children:[e.jsx("td",{className:"text-center",children:a+1}),e.jsx("td",{children:t.coursecode}),e.jsx("td",{children:t.title}),e.jsx("td",{className:"text-center",children:t.credit_unit}),e.jsx("td",{className:"text-center",children:t.grade}),e.jsx("td",{className:"text-center",children:t.total_point})]},a))})]})})}),e.jsx("div",{className:"w-[438px] bg-white mt-6",children:e.jsxs("table",{className:"table-fixed w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#0D7590] text-white text-sm font-bold h-14",children:[e.jsx("th",{children:"UNTS"}),e.jsx("th",{children:"UNTD"}),e.jsx("th",{children:"GPTS"}),e.jsx("th",{children:"GPTD"}),e.jsx("th",{children:"GPATS"}),e.jsx("th",{children:"GPATD"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"text-sm bg-[#F2F2F2] h-14 text-center text-black",children:[e.jsx("td",{children:(s==null?void 0:s.unts)||"N/A"}),e.jsx("td",{children:(s==null?void 0:s.untd)||"N/A"}),e.jsx("td",{children:(s==null?void 0:s.gpts)||"N/A"}),e.jsx("td",{children:(s==null?void 0:s.gptd)||"N/A"}),e.jsx("td",{children:(s==null?void 0:s.gpats)||"N/A"}),e.jsx("td",{children:(s==null?void 0:s.gpatd)||"N/A"})]})})]})}),e.jsxs("div",{className:"py-4 text-sm font-medium",children:["Remarks: ",e.jsx("span",{className:"text-green-600",children:s==null?void 0:s.remarks})]}),e.jsxs("div",{className:"bottom-10 space-y-4 absolute",children:[e.jsx("input",{type:"text",className:"outline-none border-b"}),e.jsx("h1",{className:"text-black-10 text-sm",children:"Registrar"})]})]})};export{B as default};
