import{r as u,j as e,u as m,c as p,R as g,a as f}from"./vendor-react-B0nNUp-K.js";import{R as j}from"./vendor-C5SAfxR9.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const t of s.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&o(t)}).observe(document,{childList:!0,subtree:!0});function l(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=l(r);fetch(r.href,s)}})();const v=({applyFilters:d})=>{const c=[{id:"age",label:"Age",type:"text"},{id:"state",label:"State",type:"text"},{id:"level",label:"Level",type:"text"},{id:"gender",label:"Gender",type:"select",options:[{label:"Male",value:"male"},{label:"Female",value:"female"}]}],[l,o]=u.useState({age:"",state:"",level:"",gender:""}),r=t=>{const{name:a,value:x}=t.target;o(n=>({...n,[a]:x}))},s=t=>{t.preventDefault(),console.log("Filters Applied:",l),d(l)};return e.jsxs("form",{onSubmit:s,className:"gap-4 grid grid-cols-3 items-center py-8 w-full",children:[c.map(t=>e.jsxs("fieldset",{className:"border border-gray-400 px-4 py-2 rounded-md",children:[e.jsx("legend",{className:"text-sm font-semibold text-gray-700 px-2",children:t.label}),t.type==="select"?e.jsxs("select",{id:t.id,name:t.id,value:l[t.id]||"",onChange:r,required:!0,className:"w-full p-1 rounded outline-none",children:[e.jsxs("option",{value:"",children:["Select ",t.label]}),t.options.map((a,x)=>e.jsx("option",{value:a.value,children:a.label},x))]}):e.jsx("input",{type:t.type,id:t.id,name:t.id,value:l[t.id]||"",onChange:r,required:!0,className:"w-full p-1 rounded outline-none"})]},t.id)),e.jsx("div",{className:"pt-3",children:e.jsx("input",{type:"submit",value:"Search",className:"rounded py-4 bg-green-500 text-white w-full hover:bg-green-600 transition"})})]})},b=({students:d,loading:c,error:l})=>{const o=m(),r=t=>{o(`/result/${t.id}`,{state:{student:t}})},s=async t=>{try{const a=await axios.post("https://test.omniswift.com.ng/api/viewResult/2",{student_id:t});if(!a.data||!a.data.data){console.error("Invalid response data",a);return}o(`/result/${t}`,{state:{studentData:a.data.data}})}catch(a){console.error("Error fetching student result:",a)}};return e.jsx("div",{className:"w-full px-8 py-3 bg-white",children:c?e.jsxs("p",{className:"text-center flex flex-col justify-center items-center h-[450px] w-full text-blue-500",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Loading..."]}):l?e.jsxs("p",{className:"text-center text-red-500",children:["Error: ",l]}):d.length>0?e.jsx("div",{className:"overflow-y-auto w-full h-[450px]",children:e.jsxs("table",{className:"table-fixed w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200 text-black text-left text-sm font-bold h-14",children:[e.jsx("th",{className:"text-center",children:"S/N"}),e.jsx("th",{children:"Surname"}),e.jsx("th",{children:"First Name"}),e.jsx("th",{children:"Age"}),e.jsx("th",{children:"Gender"}),e.jsx("th",{children:"Level"}),e.jsx("th",{children:"State"}),e.jsx("th",{className:"text-center",children:"Action"})]})}),e.jsx("tbody",{children:d.map((t,a)=>e.jsxs("tr",{onClick:()=>r(t),className:"border-b text-sm border-gray-300 h-14 text-left text-black-10 capitalize cursor-pointer",children:[e.jsx("td",{className:"text-center",children:a+1}),e.jsx("td",{children:t.surname||"N/A"}),e.jsx("td",{children:t.firstname||"N/A"}),e.jsx("td",{children:t.age||"N/A"}),e.jsx("td",{children:t.gender||"N/A"}),e.jsx("td",{children:t.level||"N/A"}),e.jsx("td",{children:t.state||"N/A"}),e.jsx("td",{className:"text-center",children:e.jsx("button",{onClick:()=>s(t.id),className:"bg-green-500 hover:bg-green-600 cursor-pointer transition-all font-normal w-[126px] h-[35px] text-xs text-white rounded",children:"Download File"})})]},a))})]})}):e.jsx("p",{className:"text-center py-4 text-gray-500",children:"No data available"})})},y=()=>{const[d,c]=u.useState([]),[l,o]=u.useState([]),[r,s]=u.useState(!0),[t,a]=u.useState(null);u.useEffect(()=>{(async()=>{try{const i=await(await fetch("https://test.omniswift.com.ng/api/viewAllData")).json();console.log("API Response:",i),c(i.data.students||[]),o(i.data.students||[])}catch(h){console.error("Error fetching data:",h),a("Failed to load data.")}finally{s(!1)}})()},[]);const x=n=>{let h=d.filter(i=>(n.age===""||i.age.toString()===n.age)&&(n.state===""||i.state.toLowerCase().includes(n.state.toLowerCase()))&&(n.level===""||i.level.toLowerCase().includes(n.level.toLowerCase()))&&(n.gender===""||i.gender.toLowerCase()===n.gender.toLowerCase()));o(h)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-[90%] h-full flex-col flex justify-center mx-auto items-start relative top-[30px]",children:e.jsxs("div",{className:"space-y-4 w-full",children:[e.jsx("h1",{className:" text-4xl text-black-10 font-black",children:"Student Data Table"}),e.jsxs("div",{className:"w-full h-[336px] p-8 bg-white ",children:[e.jsx("h1",{className:"text-gray-10",children:"Filter Student Table By:"}),e.jsx(v,{applyFilters:x})]}),e.jsx(b,{students:l,loading:r,error:t})]})})})},N=p([{path:"/",element:e.jsx("div",{className:"!bg-[#F6F6F6] min-h-screen",children:e.jsx(y,{})})},{path:"/result/:id",element:e.jsx(j,{})}],{future:{v7_relativeSplatPath:!0,v7_fetcherPersist:!0,v7_normalizeFormMethod:!0,v7_partialHydration:!0,v7_skipActionErrorRevalidation:!0}}),w=()=>e.jsx("div",{className:"app",children:e.jsx(g,{future:{v7_startTransition:!0},router:N})});f.createRoot(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(w,{})}));
