import{d as R,u as P,e as A,r as a,j as e}from"./react-vendor-CSMy5Is9.js";import{h as D,f as E,e as C}from"./vendor-DfK2mEZf.js";const k="/student-data/assets/Logo-Bl0PQm68.png",F="/student-data/assets/Passport-DBeMcp5B.png",G=()=>{const{id:i}=R();P(),A();const[r,h]=a.useState(null),[m,f]=a.useState(!0),[x,j]=a.useState(null),c=a.useRef(null);a.useEffect(()=>{(async()=>{try{const l=await C.post("https://test.omniswift.com.ng/api/viewResult/2",{student_id:i});if(l.data&&l.data.data)h(l.data.data);else throw new Error("Invalid response data")}catch(l){console.error("Error fetching student result:",l),j("Failed to fetch student result. Please try again.")}finally{f(!1)}})()},[i]),a.useEffect(()=>{r&&setTimeout(()=>{N()},1500)},[r]);const N=async()=>{if(!c.current){console.error("Error: resultRef is null");return}try{const t=await D(c.current,{scale:4,backgroundColor:"#ffffff",useCORS:!0}),l=t.toDataURL("image/png"),d=new E("p","mm","a4"),o=210,S=t.height*o/t.width;d.addImage(l,"PNG",0,10,o,S),d.save(`Student_Result_${r.surname}.pdf`)}catch(t){console.error("Error generating PDF:",t)}};if(m)return e.jsxs("p",{className:"flex flex-col justify-center items-center h-screen w-full text-blue-500",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"Loading student result..."]});if(x)return e.jsxs("p",{className:"flex flex-col justify-center items-center h-screen w-full text-blue-500",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),x]});if(!r)return e.jsxs("p",{className:"flex flex-col justify-center items-center h-screen w-full text-blue-500",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}),"No data available"]});const{surname:p,firstname:u,level:g,gender:w,state:b,reg_no:v,session:y,result:n,cummulative:s}=r;return e.jsxs("div",{ref:c,className:"space-y-4 w-full h-full px-4",children:[e.jsxs("div",{className:"flex justify-between items-center w-full h-full",children:[e.jsx("div",{children:e.jsx("img",{src:k,alt:"School Logo",className:"w-32 mx-auto mb-4"})}),e.jsxs("div",{className:"flex flex-col items-center text-center py-4  gap-4",children:[e.jsxs("div",{className:"w-full max-w-[275px] justify-center flex flex-col items-center",children:[e.jsx("h1",{className:"text-base font-bold",children:"FREMONT COLLEGE OF EDUCATION"}),e.jsx("p",{className:"text-xs max-w-[240px] text-center",children:"No.5 Raymond Osuman Street, PMB 2191 Maitama, Abuja, Nigeria."})]}),e.jsxs("div",{className:"text-xl font-semibold",children:[e.jsx("h1",{children:"Post Graduate Diploma in Education"}),e.jsx("p",{className:"text-xs font-bold",children:"Student First Semester Statement Of Result"})]})]}),e.jsx("div",{children:e.jsx("img",{src:F,alt:"Student Profile",className:"w-[100px] h-[100px] mx-auto border border-gray-300 shadow-sm"})})]}),e.jsxs("div",{className:"flex justify-between w-full py-6",children:[e.jsxs("div",{className:"flex-col flex text-xs gap-4",children:[e.jsxs("div",{className:"w-[200px] flex gap-4",children:[e.jsx("span",{className:"text-xs font-bold",children:"Name:"}),e.jsxs("h1",{className:"capitalize",children:[p," ",u]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{className:"text-xs font-bold",children:"Level:"}),e.jsxs("h1",{className:"",children:[" ",g||"N/A"]})]})]}),e.jsxs("div",{className:"flex-col flex text-xs gap-4",children:[e.jsxs("div",{className:"w-[200px] flex gap-4",children:[e.jsx("span",{className:"text-xs font-bold",children:"gender:"}),e.jsx("h1",{className:"capitalize",children:w||"N/A"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{className:"text-xs font-bold",children:"state:"}),e.jsxs("h1",{className:"",children:[" ",b||"N/A"]})]})]}),e.jsxs("div",{className:"flex-col flex text-xs gap-4",children:[e.jsxs("div",{className:"w-[200px] flex gap-2",children:[e.jsx("span",{className:"text-xs font-bold",children:"Reg. No.:"}),e.jsx("h1",{className:"",children:v||"N/A"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{className:"text-xs font-bold",children:"Session:"}),e.jsxs("h1",{className:"",children:[" ",y||"N/A"]})]})]})]}),e.jsx("div",{className:"w-full bg-white",children:e.jsx("div",{className:"overflow-y-auto w-full",children:e.jsxs("table",{className:"table-fixed w-full border-collapse bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#0D7590] text-white text-left text-sm font-bold h-14",children:[e.jsx("th",{className:"text-center",children:"S/N"}),e.jsx("th",{className:"",children:"Course Code"}),e.jsx("th",{className:"",children:"Course Title"}),e.jsx("th",{className:"text-center",children:"Unit"}),e.jsx("th",{className:"text-center",children:"Grade"}),e.jsx("th",{className:"text-center",children:"Total Point"})]})}),e.jsx("tbody",{children:n==null?void 0:n.map((t,l)=>e.jsxs("tr",{className:"text-sm bg-[#F2F2F2] even:bg-white h-14 text-left text-black",children:[e.jsx("td",{className:"text-center",children:l+1}),e.jsx("td",{children:t.coursecode}),e.jsx("td",{children:t.title}),e.jsx("td",{className:"text-center",children:t.credit_unit}),e.jsx("td",{className:"text-center",children:t.grade}),e.jsx("td",{className:"text-center",children:t.total_point})]},l))})]})})}),e.jsx("div",{className:"w-[438px] bg-white mt-6",children:e.jsxs("table",{className:"table-fixed w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#0D7590] text-white text-sm font-bold h-14",children:[e.jsx("th",{children:"UNTS"}),e.jsx("th",{children:"UNTD"}),e.jsx("th",{children:"GPTS"}),e.jsx("th",{children:"GPTD"}),e.jsx("th",{children:"GPATS"}),e.jsx("th",{children:"GPATD"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"text-sm bg-[#F2F2F2] h-14 text-center text-black",children:[e.jsx("td",{children:(s==null?void 0:s.unts)||"N/A"}),e.jsx("td",{children:(s==null?void 0:s.untd)||"N/A"}),e.jsx("td",{children:(s==null?void 0:s.gpts)||"N/A"}),e.jsx("td",{children:(s==null?void 0:s.gptd)||"N/A"}),e.jsx("td",{children:(s==null?void 0:s.gpats)||"N/A"}),e.jsx("td",{children:(s==null?void 0:s.gpatd)||"N/A"})]})})]})}),e.jsxs("div",{className:"py-4 text-sm font-medium",children:["Remarks: ",e.jsx("span",{className:"text-green-600",children:s==null?void 0:s.remarks})]}),e.jsxs("div",{className:"bottom-10 space-y-4 absolute",children:[e.jsx("input",{type:"text",className:"outline-none border-b"}),e.jsx("h1",{className:"text-black-10 text-sm",children:"Registrar"})]})]})};export{G as default};
